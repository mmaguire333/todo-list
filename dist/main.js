(()=>{"use strict";const e=function(e,t){return{name:e,todos:t,addTodo(e){this.todos.push(e)},removeTodo(e){let t=this.todos.findIndex((t=>t.title===e.title));this.todos.splice(t,1)}}},t=function(e,t,o,n,l){return{title:e,description:t,dueDate:o,priority:n,isDone:l}};let o=document.createElement("form");o.classList.add("project-form");let n=document.createElement("input");n.type="text",n.id="new-project-name",n.name="new-project-name",n.required=!0,n.placeholder="Enter project title";let l=document.createElement("button");l.type="submit",l.textContent="Submit",l.classList.add("submit-project-button");let d=document.createElement("button");d.type="button",d.textContent="Cancel",d.classList.add("cancel-button");let r=document.createElement("div");r.classList.add("project-form-buttons"),r.appendChild(l),r.appendChild(d),o.appendChild(n),o.appendChild(r);let i=document.querySelector(".projects");function c(){n.value="",o.remove()}const a={projects:[],getProjects(){return this.projects},addProject(e){this.projects.push(e)},removeProject(e){let t=this.projects.findIndex((t=>t.name===e));this.projects.splice(t,1)},getAllTodos(){let e=[];for(let t=0;t<this.projects.length;t++)for(let o=0;o<this.projects[t].todos.length;o++)e.push(this.projects[t].todos[o]);return e.sort(((e,t)=>e.dueDate-t.dueDate))}};let u=document.createElement("form");u.classList.add("todo-form-container");let s=document.createElement("input");s.type="text",s.classList.add("todo-title-input"),s.required=!0,s.placeholder="Title:";let p=document.createElement("input");p.type="text",p.classList.add("todo-description-input"),p.required=!0,p.placeholder="Description:";let m=document.createElement("label");m.textContent="Due Date:",m.for="due-date";let g=document.createElement("input");g.type="date",g.classList.add("duedate-input"),g.name="due-date",g.required=!0;let y=document.createElement("label");y.textContent="Is this todo high, medium, or low priority?",y.for="priority";let h=document.createElement("select");h.id="todo-priority",h.name="priority",h.required=!0;let f=document.createElement("option");f.textContent="High Priority",f.value="High",f.selected=!0;let C=document.createElement("option");C.textContent="Medium Priority",C.value="Medium";let b=document.createElement("option");b.textContent="Low Priority",b.value="Low",h.appendChild(f),h.appendChild(C),h.appendChild(b);let S=document.createElement("label");S.textContent="Has this todo been completed?",S.for="todo-status-dropdown";let v=document.createElement("select");v.id="todo-status-dropdown",v.name="todo-status-dropdown",v.required=!0;let E=document.createElement("option");E.textContent="No",E.value="no",E.selected=!0;let x=document.createElement("option");x.textContent="Yes",x.value="yes",v.appendChild(x),v.appendChild(E);let q=document.createElement("button");q.type="button",q.textContent="Submit",q.id="submit-todo";let D=document.createElement("button");D.type="button",D.textContent="Cancel",D.id="cancel-todo";let j=document.createElement("div");j.appendChild(q),j.appendChild(D),u.appendChild(s),u.appendChild(p),u.appendChild(m),u.appendChild(g),u.appendChild(y),u.appendChild(h),u.appendChild(S),u.appendChild(v),u.appendChild(j);let k=document.querySelector(".content");function w(){s.value="",p.value="",g.value="",E.selected=!0,f.selected=!0,u.remove()}let L=document.querySelector(".todos");function I(e){let t=document.createElement("li"),o=document.createElement("div");o.classList.add("todo-container");let n=document.createElement("h3");n.classList.add("todo-title"),n.textContent=e.title;let l=document.createElement("p");l.classList.add("todo-description-paragraph"),l.textContent=e.description,l.style.fontStyle="italic";let d=document.createElement("p");d.classList.add("todo-due-date"),d.textContent="Due Date: "+(e.dueDate.getMonth()+1)+"/"+e.dueDate.getDate()+"/"+e.dueDate.getFullYear();let r=document.createElement("p");r.classList.add("todo-priority"),r.textContent="Priority: "+e.priority;let i=document.createElement("p");i.classList.add("todo-status"),"no"===e.isDone?i.textContent="Status: In Progress":i.textContent="Satus: Completed";let c=document.createElement("button");c.type="button",c.id="edit-todo-btn",c.textContent="Edit";let a=document.createElement("button");a.type="button",a.id="delete-todo-button",a.textContent="Delete";let u=document.createElement("div");u.classList.add("todo-buttons"),u.appendChild(c),u.appendChild(a),o.appendChild(n),o.appendChild(d),o.appendChild(l),o.appendChild(r),o.appendChild(i),o.appendChild(u),t.appendChild(o),L.appendChild(t)}let P=document.createElement("form");P.classList.add("todo-form-container");let N=document.createElement("input");N.type="text",N.classList.add("todo-title-input"),N.required=!0,N.placeholder="Title:";let T=document.createElement("input");T.type="text",T.classList.add("todo-description-input"),T.required=!0,T.placeholder="Description:";let A=document.createElement("label");A.textContent="Due Date:",A.for="due-date";let O=document.createElement("input");O.type="date",O.classList.add("duedate-input"),O.name="due-date",O.required=!0;let B=document.createElement("label");B.textContent="Is this todo high, medium, or low priority?",B.for="priority";let M=document.createElement("select");M.id="todo-priority",M.name="priority",M.required=!0;let H=document.createElement("option");H.textContent="High Priority",H.value="High";let J=document.createElement("option");J.textContent="Medium Priority",J.value="Medium";let Y=document.createElement("option");Y.textContent="Low Priority",Y.value="Low",M.appendChild(H),M.appendChild(J),M.appendChild(Y);let F=document.createElement("label");F.textContent="Has this todo been completed?",F.for="todo-status-dropdown";let V=document.createElement("select");V.id="todo-status-dropdown",V.name="todo-status-dropdown",V.required=!0;let X=document.createElement("option");X.textContent="No",X.value="no",X.selected=!0;let G=document.createElement("option");G.textContent="Yes",G.value="yes",V.appendChild(G),V.appendChild(X);let R=document.createElement("button");R.type="button",R.textContent="Save",R.id="save-todo-changes";let U=document.createElement("button");U.type="button",U.textContent="Cancel",U.id="cancel-todo";let W=document.createElement("div");W.appendChild(R),W.appendChild(U),P.appendChild(N),P.appendChild(T),P.appendChild(A),P.appendChild(O),P.appendChild(B),P.appendChild(M),P.appendChild(F),P.appendChild(V),P.appendChild(W);let z=document.querySelector(".content");function K(){P.remove()}function Q(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function Z(e){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z(e)}function $(e){Q(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===Z(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function _(e){Q(1,arguments);var t=$(e);return t.setHours(0,0,0,0),t}function ee(e,t){Q(2,arguments);var o=_(e),n=_(t);return o.getTime()===n.getTime()}function te(e){return Q(1,arguments),ee(e,Date.now())}function oe(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}var ne={};function le(){return ne}function de(e,t){var o,n,l,d,r,i,c,a;Q(1,arguments);var u=le(),s=oe(null!==(o=null!==(n=null!==(l=null!==(d=null==t?void 0:t.weekStartsOn)&&void 0!==d?d:null==t||null===(r=t.locale)||void 0===r||null===(i=r.options)||void 0===i?void 0:i.weekStartsOn)&&void 0!==l?l:u.weekStartsOn)&&void 0!==n?n:null===(c=u.locale)||void 0===c||null===(a=c.options)||void 0===a?void 0:a.weekStartsOn)&&void 0!==o?o:0);if(!(s>=0&&s<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var p=$(e),m=p.getDay(),g=(m<s?7:0)+m-s;return p.setDate(p.getDate()-g),p.setHours(0,0,0,0),p}function re(e,t,o){Q(2,arguments);var n=de(e,o),l=de(t,o);return n.getTime()===l.getTime()}function ie(e,t){return Q(1,arguments),re(e,Date.now(),t)}function ce(e){let t=[];for(let o=0;o<e.todos.length;o++)t.push({title:e.todos[o].title,description:e.todos[o].description,dueDate:e.todos[o].dueDate.toString(),priority:e.todos[o].priority,isDone:e.todos[o].isDone});localStorage.setItem(e.name,JSON.stringify(t))}let ae;!function(){for(let t=0;t<localStorage.length;t++){let o=localStorage.key(t),n=JSON.parse(localStorage.getItem(localStorage.key(t)));for(let e=0;e<n.length;e++){let t=n[e].dueDate,o=new Date(Date.parse(t));n[e].dueDate=o,console.log(n[e])}let l=e(o,n);a.addProject(l)}let t=document.querySelector(".projects-list");for(let e=0;e<a.getProjects().length;e++){let o=document.createElement("li");o.classList.add("sidebar-project-item");let n=document.createElement("button");n.type="button",n.textContent="X",n.classList.add("delete-button");let l=document.createElement("div");l.classList.add("sidebar-project-container"),l.appendChild(o),l.appendChild(n),o.textContent=a.getProjects()[e].name,t.appendChild(l)}}(),document.querySelector(".new-project").addEventListener("click",(()=>{i.appendChild(o)})),document.addEventListener("click",(function(e){e.target.closest(".cancel-button")&&c()})),document.addEventListener("click",(function(t){const o=t.target.closest(".submit-project-button");let n=document.querySelector(".projects-list"),l=document.createElement("li");l.classList.add("sidebar-project-item");let d=document.createElement("button");d.type="button",d.textContent="X",d.classList.add("delete-button");let r=document.createElement("div");if(r.classList.add("sidebar-project-container"),r.appendChild(l),r.appendChild(d),o){if(!document.querySelector(".project-form").checkValidity())return void alert("Please choose a name for this project.");for(let e=0;e<a.getProjects().length;e++)if(document.getElementById("new-project-name").value===a.getProjects()[e].name)return void alert("A project with this name already exists. Please choose a different name.");let t=e(document.getElementById("new-project-name").value,[]);a.addProject(t),ce(t),c(),l.textContent=t.name,n.appendChild(r)}})),document.addEventListener("click",(function(e){const t=e.target.closest(".delete-button");if(t){let e=t.previousElementSibling.textContent;if(document.querySelector(".content-title").textContent===e){document.querySelector(".content-title").textContent="",document.getElementById("add-todo-button").style.display="none";let e=document.querySelector(".todos");for(;e.firstChild;)e.firstChild.remove()}a.removeProject(e),o=e,localStorage.removeItem(o),t.parentNode.remove()}var o})),document.addEventListener("click",(function(e){const t=e.target.closest(".sidebar-project-item");if(t){let e=document.querySelectorAll(".sidebar-project-item");for(let t=0;t<e.length;t++)e[t].parentNode.style.backgroundColor="transparent";document.querySelector(".today").style.backgroundColor="transparent",document.querySelector(".this-week").style.backgroundColor="transparent",document.querySelector(".all").style.backgroundColor="transparent",t.parentNode.style.backgroundColor="#2a2438";let o=document.querySelector(".content-title"),n=document.querySelector(".todos");for(;n.firstChild;)n.firstChild.remove();o.textContent=t.textContent;let l=document.getElementById("add-todo-button");"none"===l.style.display&&(l.style.display="block");let d=a.getProjects().find((e=>e.name===o.textContent)).todos;for(let e=0;e<d.length;e++)I(d[e])}})),document.addEventListener("click",(function(e){e.target.closest("#add-todo-button")&&k.appendChild(u)})),document.addEventListener("click",(function(e){e.target.closest("#cancel-todo")&&w()})),document.addEventListener("click",(function(e){if(e.target.closest("#submit-todo")){e.preventDefault();let o=document.querySelector(".content-title"),n=a.getProjects().find((e=>e.name===o.textContent)),l=document.querySelector(".todo-title-input").value,d=document.querySelector(".todo-description-input").value,r=document.querySelector(".duedate-input").value,i=parseInt(r.substring(0,4)),c=parseInt(r.substring(5,7))-1,u=parseInt(r.substring(8)),s=new Date(i,c,u),p=document.getElementById("todo-priority").value,m=document.getElementById("todo-status-dropdown").value;if(!document.querySelector(".todo-form-container").checkValidity())return void alert("Please fill out all required fields.");let g=t(l,d,s,p,m);n.addTodo(g),ce(n),w(),I(g)}})),document.addEventListener("click",(function(e){const t=e.target.closest("#delete-todo-button");if(t){let e=a.getProjects().find((e=>e.name===document.querySelector(".content-title").textContent)),o=t.parentNode.previousElementSibling.previousElementSibling.previousElementSibling.previousElementSibling.previousElementSibling.textContent,n=t.parentNode.previousElementSibling.previousElementSibling.previousElementSibling.textContent,l=e.todos.find((e=>e.title===o&&e.description===n));e.removeTodo(l),function(e,t){for(let o=0;o<localStorage.length;o++)if(e.name===localStorage.key(o)){let n=JSON.parse(localStorage.getItem(localStorage.key(o)));for(let o=0;o<n.length;o++)n[o].title===t.title&&n[o].description===t.description&&(n.splice(o,1),localStorage.setItem(e.name,JSON.stringify(n)))}}(e,l);let d=document.querySelector(".todos");for(;d.firstChild;)d.firstChild.remove();let r=e.todos;for(let e=0;e<r.length;e++)I(r[e])}})),document.addEventListener("click",(function(e){const t=e.target.closest("#edit-todo-btn");if(t){let e=a.getProjects().find((e=>e.name===document.querySelector(".content-title").textContent)),o=t.parentNode.previousElementSibling.previousElementSibling.previousElementSibling.previousElementSibling.previousElementSibling.textContent,n=t.parentNode.previousElementSibling.previousElementSibling.previousElementSibling.textContent;ae=e.todos.find((e=>e.title===o&&e.description===n)),function(e){N.value=e.title,T.value=e.description;let t=e.dueDate.getFullYear().toString(),o=(e.dueDate.getMonth()+1).toString();1===o.length&&(o="0"+o);let n=e.dueDate.getDate().toString();O.value=t+"-"+o+"-"+n,"High"===e.priority?H.selected=!0:"Medium"===e.priority?J.selected=!0:Y.selected=!0,"yes"===e.isDone?G.selected=!0:X.selected=!0,z.appendChild(P)}(ae)}})),document.addEventListener("click",(function(e){e.target.closest("#cancel-todo")&&K()})),document.addEventListener("click",(function(e){if(e.target.closest("#save-todo-changes")){let e=document.querySelector(".todo-title-input").value,o=document.querySelector(".todo-description-input").value,n=document.querySelector(".duedate-input").value,l=parseInt(n.substring(0,4)),d=parseInt(n.substring(5,7))-1,r=parseInt(n.substring(8)),i=new Date(l,d,r),c=document.getElementById("todo-priority").value,u=document.getElementById("todo-status-dropdown").value,s=t(ae.title,ae.description,ae.dueDate,ae.priority,ae.isDone);if(!document.querySelector(".todo-form-container").checkValidity())return void alert("Please fill out all required fields.");let p,m=document.querySelector(".todos").children;for(let e=0;e<m.length;e++)m[e].firstChild.firstChild.textContent===ae.title&&m[e].firstChild.firstChild.nextSibling.nextSibling.textContent===ae.description&&(p=m[e].firstChild);ae.title=e,ae.description=o,ae.dueDate=i,ae.priority=c,ae.isDone=u,function(e,t,o){for(let n=0;n<localStorage.length;n++)if(e.name===localStorage.key(n)){let l=JSON.parse(localStorage.getItem(localStorage.key(n)));for(let n=0;n<l.length;n++)l[n].title===t.title&&l[n].description===t.description&&(l.splice(n,1,o),localStorage.setItem(e.name,JSON.stringify(l)))}}(a.getProjects().find((e=>e.name===document.querySelector(".content-title").textContent)),s,ae),p.firstChild.textContent=e,p.firstChild.nextSibling.textContent="Due Date: "+(i.getMonth()+1)+"/"+i.getDate()+"/"+i.getFullYear(),p.firstChild.nextSibling.nextSibling.textContent=o,p.firstChild.nextSibling.nextSibling.nextSibling.textContent="Priority: "+c,p.firstChild.nextSibling.nextSibling.nextSibling.nextSibling.textContent="yes"===u?"Status: Completed":"Status: In Progress",K()}}));let ue=document.querySelector(".today"),se=document.querySelector(".this-week"),pe=document.querySelector(".all");ue.addEventListener("click",(()=>{se.style.backgroundColor="#5c5470",pe.style.backgroundColor="#5c5470",ue.style.backgroundColor="#2a2438";let e=document.querySelectorAll(".sidebar-project-item");for(let t=0;t<e.length;t++)e[t].parentNode.style.backgroundColor="#5c5470";document.querySelector(".content-title").textContent="Todos Due Today",document.getElementById("add-todo-button").style.display="none";let t=document.querySelector(".todos");for(;t.firstChild;)t.firstChild.remove();let o=a.getAllTodos();for(let e=0;e<o.length;e++)te(o[e].dueDate)&&I(o[e]);let n=document.querySelectorAll("#edit-todo-btn"),l=document.querySelectorAll("#delete-todo-button");for(let e=0;e<n.length;e++)n[e].remove(),l[e].remove()})),se.addEventListener("click",(()=>{ue.style.backgroundColor="#5c5470",pe.style.backgroundColor="#5c5470",se.style.backgroundColor="#2a2438";let e=document.querySelectorAll(".sidebar-project-item");for(let t=0;t<e.length;t++)e[t].parentNode.style.backgroundColor="#5c5470";document.querySelector(".content-title").textContent="Todos Due This Week",document.getElementById("add-todo-button").style.display="none";let t=document.querySelector(".todos");for(;t.firstChild;)t.firstChild.remove();let o=a.getAllTodos();for(let e=0;e<o.length;e++)ie(o[e].dueDate)&&I(o[e]);let n=document.querySelectorAll("#edit-todo-btn"),l=document.querySelectorAll("#delete-todo-button");for(let e=0;e<n.length;e++)n[e].remove(),l[e].remove()})),pe.addEventListener("click",(()=>{ue.style.backgroundColor="#5c5470",se.style.backgroundColor="#5c5470",pe.style.backgroundColor="#2a2438";let e=document.querySelectorAll(".sidebar-project-item");for(let t=0;t<e.length;t++)e[t].parentNode.style.backgroundColor="#5c5470";document.querySelector(".content-title").textContent="All Upcoming Todos",document.getElementById("add-todo-button").style.display="none";let t=document.querySelector(".todos");for(;t.firstChild;)t.firstChild.remove();let o=a.getAllTodos();for(let e=0;e<o.length;e++)I(o[e]);let n=document.querySelectorAll("#edit-todo-btn"),l=document.querySelectorAll("#delete-todo-button");for(let e=0;e<n.length;e++)n[e].remove(),l[e].remove()}))})();